# Руководство для разработчиков сервисов

## Как добавить сервис?

1. **Создайте директорию под свой сервис**  
   Создайте новую директорию в корне проекта, где будет размещаться ваш сервис.

2. **Разместите свой проект в этой директории**  
   Поместите все файлы вашего проекта в созданную директорию.

3. **Напишите Dockerfile**  
   Создайте `Dockerfile` в корне вашей директории. В этом файле опишите, как собрать и запустить ваш сервис в Docker-контейнере.

4. **Добавьте свой проект в `docker-compose.yaml`**  
   Откройте файл `docker-compose.yaml` и добавьте конфигурацию для вашего сервиса, следуя примеру других сервисов.

5. **Добавьте свой сервис в `nginx/nginx.conf`**  
   Откройте файл `nginx/nginx.conf` и добавьте конфигурацию для вашего сервиса, следуя примеру `service1`.


## Как получать информацию о пользователе в своем сервисе?

1. **Прочитать ID пользователя из заголовка `X-User-ID`**  
   В вашем сервисе вы можете получить ID пользователя из заголовка запроса `X-User-ID`. Пример можно посмотреть в директории `service1`.

2. **Информация о пользователях**  
   Информация о пользователях находится в таблице `users` базы данных `mobile`. В таблице пока есть только юзернейм:

   ```sql
   CREATE TABLE users (
       username VARCHAR(50) PRIMARY KEY,
       password VARCHAR(100) NOT NULL
   );
   ```
## Как обратиться к сервису (в примерах curl для localhost)?
1. **Зарегистрируйте нового пользователя**  
   Используйте следующий запрос для регистрации нового пользователя:
    ```bash
   curl -X POST http://localhost/auth/register -H "Content-Type: application/json" -d '{"username": "user", "password": "password"}'
   ```
2. **Получите JWT токен**   
    После регистрации получите JWT токен с помощью следующего запроса:
    ```bash
    curl -X POST http://localhost/auth/login -H "Content-Type: application/json" -d '{"username": "user", "password": "password"}'
    ```
    
    Ответ будет содержать ваш токен:
    ```json
    {
        "token": "<Ваш токен>"
    }
    ```
3. **Обратитесь к сервису**     
    Используйте полученный токен для обращения к вашему сервису:
    ```bash
    curl -X <Метод> http://localhost/<ваш сервис>/<эндпоинт> -H "Authorization: Bearer <Ваш токен>"
    ```
**Примечание:** Если у вас возникнут вопросы или проблемы, не стесняйтесь обращаться в Telegram: [@ncjdjn](https://t.me/ncjdjn).