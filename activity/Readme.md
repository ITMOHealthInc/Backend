# Микросервис для работы с шагами

## Сервис: `/activity`

### 1. Получение количества шагов (синхронизация с сервером)

**Тип запроса:** GET  
**Эндпоинт:** `/steps`  
**Аутентификация:** Требуется токен  

#### Формат запроса:
```bash
curl -X GET http://localhost/activity/steps \
  -H "Authorization: Bearer <Токен_пользователя>" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json"
```

#### Параметры запроса:
Отсутствуют

#### Ответ:

| Поле  | Тип данных | Описание         |
|-------|------------|------------------|
| steps | integer    | Количество пройденных шагов|
| goal  | integer    | Количество шагов (цель) |

**Пример успешного ответа:**
```json
{
  "steps": 123,
  "goal": 10000
}
```

**Возможные ошибки:**
- ошибки авторизации. см `auth`
- `400 Bad Request` - Не удалось проверить заголовок `X-User-ID`
- `500 Internal Server Error` - Ошибка работы сервиса

---

### 2. Обновление количества шагов на сервере

**Тип запроса:** POST  
**Эндпоинт:** `/set-steps`  
**Аутентификация:** Требуется токен  

#### Формат запроса:
```bash
curl -X POST http://localhost/activity/set-steps \
  -H "Authorization: Bearer <Токен_пользователя>" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json" \
  -d '{"steps": 1234}'
```

#### Параметры запроса:

| Поле  | Тип данных | Описание         |
|-------|------------|------------------|
| steps | integer    | Количество шагов |

#### Ответ:

| Поле  | Тип данных | Описание         |
|-------|------------|------------------|
| steps | integer    | Количество пройденных шагов|
| goal  | integer    | Количество шагов (цель) |

**Пример успешного ответа:**
```json
{
  "steps": 123,
  "goal": 10000
}
```

**Возможные ошибки:**
- ошибки авторизации. см `auth`
- `400 Bad Request` - Не удалось проверить заголовок `X-User-ID` или неверный формат данных
- `500 Internal Server Error` - Ошибка работы сервиса

---

### 3. Обновление цели на сервере

**Тип запроса:** POST  
**Эндпоинт:** `/update-goal`  
**Аутентификация:** Требуется токен  

#### Формат запроса:
```bash
curl -X POST http://localhost/activity/set-steps \
  -H "Authorization: Bearer <Токен_пользователя>" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json" \
  -d '{"goal": 8000}'
```

#### Параметры запроса:

| Поле  | Тип данных | Описание         |
|-------|------------|------------------|
| goal  | integer    | Количество шагов (цель) |

#### Ответ:

| Поле  | Тип данных | Описание         |
|-------|------------|------------------|
| steps | integer    | Количество пройденных шагов|
| goal  | integer    | Количество шагов (цель) |

**Пример успешного ответа:**
```json
{
  "steps": 123,
  "goal": 8000
}
```

**Возможные ошибки:**
- ошибки авторизации. см `auth`
- `400 Bad Request` - Не удалось проверить заголовок `X-User-ID` или неверный формат данных
- `500 Internal Server Error` - Ошибка работы сервиса

---

### 4. Получить статистику за месяц

**Тип запроса:** GET  
**Эндпоинт:** `/month-steps`  
**Аутентификация:** Требуется токен  

#### Формат запроса:
```bash
 curl -X GET "http://localhost/activity/month-steps?month=4&year=2025" \
  -H "Authorization: Bearer <Токен_пользователя>"\
  -H "Content-Type: application/json" \
  -H "Accept: application/json"

```

#### Параметры запроса:

| Параметр  | Тип данных | Описание         |
|-------|------------|------------------|
| month  | integer    | месяц |
| year   | integer    | год   |

#### Ответ:

| Поле          | Тип данных        | Описание         |
|---------------|-------------------|------------------|
| totalSteps    | integer           | Общее количество шагов за месяц|
| averageSteps  | double            | Среднее количество шагов в день |
| maxSteps      | integer           | Максимальное количество шагов за день |
| days          | DaySteps[]   | Детали по дням |

DaySteps:

| Поле          | Тип данных        | Описание         |
|---------------|-------------------|------------------|
| date          | string            | Дата в формате "YYYY-MM-DD"|
| steps         | integer           | Шаги за этот день |
| goal          | integer           | Цель за этот день |


**Пример успешного ответа:**
```json
{
  "totalSteps": 2468,
  "averageSteps": 1234.0,
  "maxSteps": 2345,
  "days": [
    {
      "date": "2025-04-18",
      "steps": 123,
      "goal": 8000
    },
    {
      "date": "2025-04-19",
      "steps": 2345,
      "goal": 1000
    }
  ]
}
```

**Возможные ошибки:**
- ошибки авторизации. см `auth`
- `400 Bad Request` - Не удалось проверить заголовок `X-User-ID` или неверный формат данных
- `500 Internal Server Error` - Ошибка работы сервиса
